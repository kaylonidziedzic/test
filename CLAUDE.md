# CLAUDE.md

## Collaboration Guidelines

**Developer**: nax

**重要**: Claude 在每次回复时必须遵守本节的所有规范，包括称呼开发者为 nax。

**Workflow**:
- **编译和测试**: 由 nax 负责完成
- **问题反馈**: nax 反馈编译/运行问题和日志
- **代码分析**: Claude 负责代码分析、问题诊断和解决方案
- **代码修改**: Claude 负责代码修改和优化

**Claude 修改代码前必须遵守的原则**:

1. **先读后改**: 修改任何函数前，必须先完整阅读该函数及其调用链
2. **检查信号连接**: 添加 `emit` 前，先 grep 搜索该信号的所有 `connect`，确认不会造成递归调用
3. **理解设计意图**: 理解现有代码为什么这样写，而不是盲目添加代码
4. **最小改动**: 只改必要的部分，不做额外的"改进"
5. **禁止猜测 API**:

   * 在调用任何类的成员函数/成员变量前,必须先在当前代码库中搜索并确认其定义(如 .h/.cpp等文件)

   * 如果代码库中不存在该函数/成员,不得假设它已经存在或"应该有"; 如需要新增,必须明确写成"新增接口/方法"并给出完整定义
   * 无法确认时,必须在回复中明确说明"不确定该类是否已有此方法",而不是编造或默认其存在

6. **完整理解问题描述**: 分析问题前，必须先完整理解用户描述的所有条件（如"没有勾选XX"、"在XX情况下"），不要凭关键词联想跳转到代码位置。先明确：
   - 触发条件是什么？
   - 预期行为是什么？
   - 实际行为是什么？

   然后再去定位相关代码。
